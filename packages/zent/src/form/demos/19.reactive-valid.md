---
order: 19
zh-CN:
	title: 响应式的校验状态
	field1: 字段-1
	field2: 字段-2
	item: 项目
en-US:
	title: Reactive Valid State
	field1: Field-1
	field2: Field-2
	item: Item
---

```jsx
import {
	Form,
	FormError,
	FormStrategy,
	FormControl,
	Input,
	Validators,
	FormInputField,
	FieldSet,
	Button,
	Notify,
	Alert,
} from 'zent';

const { useState, useEffect, useCallback } = React;
const { useForm, useFieldArray } = Form;

function App() {
	const form = useForm(FormStrategy.View);

	return (
		<Form form={form} layout="horizontal">
			<Preview form={form} />
			<FieldSet name="set">
				<FormInputField required name="field1" label="{i18n.field1}" />
				<FormInputField required name="field2" label="{i18n.field2}" />
			</FieldSet>
			<FieldArray />
		</Form>
	);
}

function FieldArray() {
	const model = useFieldArray('array');

	return (
		<>
			{model.children.map((child, index) => {
				return (
					<div key={child.id}>
						<FormInputField
							required
							model={child}
							label="{i18n.item}"
							props={{
								addonAfter: (
									<Icon
										type="close"
										style={{ cursor: 'pointer' }}
										onClick={() => model.splice(index, 1)}
									/>
								),
							}}
						/>
					</div>
				);
			})}
			<Button type="primary" onClick={() => model.push('')}>
				Add
			</Button>
		</>
	);
}

function Preview({ form }) {
	const [valid, setValid] = useState(true);
	useEffect(() => {
		const $ = form.model.valid$.subscribe(nextValue => {
			setValid(nextValue);
			console.log('valid:', nextValue);
		});

		return () => $.unsubscribe();
	}, [form]);

	return (
		<Alert type={valid ? 'success' : 'error'} style={{ marginBottom: 24 }}>
			Form is {valid ? 'valid' : 'invalid'}
		</Alert>
	);
}

ReactDOM.render(<App />, mountNode);
```
