@import './color';
@import './box';
@import './text';

@function to-rgb($color) {
  @return red($color), green($color), blue($color);
}

@function get-css-prefix() {
  @return '--theme';
}

@function get-css-prefix-rgb() {
  @return '--theme-rgb';
}

@function is-old-version($cat, $attr) {
  $colors: map-get($color-sets, $cat);
  $color: if($colors, map-get($colors, $attr), null);

  @if $color != null and $color {
    @return false;
  }
  @return true;
}

@function get-new-color($cat, $attr) {
  @return map-get(map-get($color-sets, $cat), $attr);
}

@function get-mapping-color($cat, $i) {
  $new-color-info: nth(map-get($theme-colors, $cat), $i);

  @return get-new-color(
    map-get($new-color-info, cat),
    map-get($new-color-info, attr)
  );
}

@function get-css-var-join($cat, $attr) {
  @return #{$cat}-#{$attr};
}

@function get-mapping-css-var($cat, $i) {
  $new-color-info: nth(map-get($theme-colors, $cat), $i);

  @return #{map-get($new-color-info, cat)}-#{map-get($new-color-info, attr)};
}

@function get-color($cat, $attr) {
  @if is-old-version($cat, $attr) == true {
    @return get-mapping-color($cat, $attr);
  } @else {
    @return get-new-color($cat, $attr);
  }
}

@function get-css-var($cat, $attr) {
  $prefix: get-css-prefix();
  @if is-old-version($cat, $attr) == true {
    @return #{$prefix}-#{get-mapping-css-var($cat, $attr)};
  }
  @return #{$prefix}-#{get-css-var-join($cat, $attr)};
}

@function get-rgb-css-var($cat, $attr) {
  $prefix: get-css-prefix-rgb();
  @if is-old-version($cat, $attr) == true {
    @return #{$prefix}-#{get-mapping-css-var($cat, $attr)};
  }
  @return #{$prefix}-rgb-#{get-css-var-join($cat, $attr)};
}

@function get-size-var($map, $attr, $name) {
  $size: map-get($map, $attr);

  @return var(--#{$name}-#{$attr}, $size);
}

@function get-font-size-var($attr) {
  @return get-size-var($font-size, $attr, 'font-size');
}

@function get-font-weight-var($attr) {
  @return get-size-var($font-weight, $attr, 'font-weight');
}

@function get-line-height-var($attr) {
  @return get-size-var($line-height, $attr, 'line-height');
}

@function get-spacing-var($attr) {
  @return get-size-var($spacing, $attr, 'spacing');
}

@function get-border-radius-var($attr) {
  @return get-size-var($border-radius, $attr, 'border-radius');
}

@function get-border-width-var($attr) {
  @return get-size-var($border-width, $attr, 'border-width');
}
